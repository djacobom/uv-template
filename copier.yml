# Prevents internal template files from being copied
_exclude:
  - "extensions"
  - "copier.yml"
  - ".git"
  - "README.md"   # Project own README

# Loads custom Jinja2 extensions
_jinja_extensions:
  - copier_templates_extensions.TemplateExtensionLoader
  - extensions/get_data.py:GCloudExtension

# User prompts
# 1. User picks the project first
gcp_project_id:
  type: str
  qmark: "ğŸ“"
  help: Â¿CuÃ¡l es el ID del proyecto de GCP que quieres usar?
  choices: "{{ gcloud_projects }}"

# 2. Copier uses that ID to fetch the relevant Service Accounts
service_account_email:
  type: str
  qmark: "ğŸ”‘"
  help: Selecciona la cuenta de servicio a utilizar
  choices: "{{ fetch_sas(gcp_project_id) }}"

# 3. Docker image name
image_name:
  type: str
  qmark: "ğŸ³"
  help: Nombre de la imagen Docker a usar

# 4. Artifact Registry selection
artifact_selection:
  type: str
  qmark: "ğŸ“¦"
  help: Seleccione el repositorio de Artifact Registry
  choices: "{{ get_artifact_labels(gcp_project_id) }}"

# 2. AUTO-EXTRACT (Hidden)
repo_name:
  type: str
  help: Nombre del repositorio
  # Look up the 'name' key in the Python class cache using the label
  default: "{{ get_artifact_value(artifact_selection, 'name') }}"
  when: false

ar_region:
  type: str
  help: RegiÃ³n del repositorio
  # Look up the 'region' key in the Python class cache using the label
  default: "{{ get_artifact_value(artifact_selection, 'region') }}"
  when: false

# 5. Cloud Run region
c_run_region:
  type: str
  qmark: "ğŸŒ"
  help: RegiÃ³n de Cloud Run a utilizar
  choices:
    "northamerica-south1 (Mexico)": "northamerica-south1"
    "us-central1 (Iowa) Low CO2": "us-central1"
    "us-east1 (South Carolina)": "us-east1"
    "us-east4 (Northern Virginia)": "us-east4"
    "us-east5 (Columbus)": "us-east5"
    "us-south1 (Dallas) Low CO2": "us-south1"
    "us-west1 (Oregon) Low CO2": "us-west1"
  default: "us-east4"

# 6. Cloud Run service name
c_run_name:
  type: str
  qmark: "â˜ï¸"
  help: Nombre del servicio de Cloud Run

# 7. User picks the desired filename for the environment
env_filename:
  type: str
  qmark: "ğŸ“"
  help: Â¿CÃ³mo llamamos a tu nuevo entorno?
  default: "dev"

